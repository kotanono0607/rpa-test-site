<!-- levels.html - ãŠé¡Œã‚¯ãƒªã‚¢ãƒ¢ãƒ¼ãƒ‰ï¼ˆRPAãƒ„ãƒ¼ãƒ«æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼‰Ver.2.0 -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãŠé¡Œã‚¯ãƒªã‚¢ãƒ¢ãƒ¼ãƒ‰ - RPA ãƒ†ã‚¹ãƒˆã‚µã‚¤ãƒˆ</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    .level-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .level-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 3px solid var(--border);
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }
    .level-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }
    .level-card.locked {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .level-card.cleared {
      border-color: var(--success);
      background: linear-gradient(135deg, #f0fdf4, #dcfce7);
    }
    .level-card.current {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
    }
    .level-number {
      position: absolute;
      top: -12px;
      left: -12px;
      width: 40px;
      height: 40px;
      background: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
    }
    .level-card.cleared .level-number {
      background: var(--success);
    }
    .level-card.locked .level-number {
      background: var(--secondary);
    }
    .level-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      padding-left: 20px;
    }
    .level-desc {
      color: var(--secondary);
      font-size: 0.9rem;
      margin-bottom: 12px;
    }
    .level-status {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
    }
    .level-status .stars {
      color: #fbbf24;
    }
    .level-status .locked-text {
      color: var(--secondary);
    }
    .level-status .cleared-text {
      color: var(--success);
      font-weight: bold;
    }
    .level-arena {
      background: white;
      border-radius: 12px;
      padding: 24px;
      min-height: 400px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .level-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--border);
    }
    .level-header h2 {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .level-header .level-badge {
      background: var(--primary);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
    }
    .mission-box {
      background: linear-gradient(135deg, #eff6ff, #dbeafe);
      padding: 16px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      border-left: 4px solid var(--primary);
    }
    .mission-box h3 {
      margin-bottom: 8px;
      color: var(--primary);
    }
    .level-content {
      padding: 20px;
      background: var(--light);
      border-radius: 8px;
      min-height: 200px;
    }
    .level-actions {
      margin-top: 20px;
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    .progress-bar-container {
      background: var(--border);
      border-radius: 10px;
      height: 20px;
      overflow: hidden;
      margin-bottom: 24px;
    }
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--success), #34d399);
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.75rem;
      font-weight: bold;
    }
    .celebration {
      text-align: center;
      padding: 40px;
      animation: celebrate 0.5s ease;
    }
    @keyframes celebrate {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    .celebration h2 {
      font-size: 2rem;
      color: var(--success);
      margin-bottom: 16px;
    }
    .celebration .stars {
      font-size: 3rem;
      margin-bottom: 16px;
    }

    /* ç¸¦é•·ãƒ¬ãƒ™ãƒ«é€²æ—ãƒãƒ¼ï¼ˆ30ãƒ¬ãƒ™ãƒ«å¯¾å¿œï¼‰ */
    .level-sidebar {
      position: fixed;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      background: white;
      border-radius: 16px;
      padding: 8px 6px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 2px;
      align-items: center;
      max-height: 92vh;
      overflow-y: auto;
    }
    .level-sidebar::-webkit-scrollbar { width: 0; }
    .level-dot {
      width: 22px;
      height: 22px;
      min-height: 22px;
      border-radius: 50%;
      background: var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.55rem;
      color: var(--secondary);
      cursor: pointer;
      transition: all 0.2s ease;
      border: 2px solid transparent;
    }
    .level-dot:hover {
      transform: scale(1.2);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .level-dot.cleared {
      background: var(--success);
      color: white;
      border-color: #059669;
    }
    .level-dot.current {
      background: var(--primary);
      color: white;
      border-color: #1d4ed8;
      animation: pulse 2s infinite;
    }
    .level-dot.locked {
      background: #e5e7eb;
      color: #9ca3af;
      cursor: not-allowed;
    }
    .level-dot.locked:hover {
      transform: none;
      box-shadow: none;
    }
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
      50% { box-shadow: 0 0 0 8px rgba(37, 99, 235, 0); }
    }
    .level-sidebar-progress {
      width: 8px;
      height: 100px;
      background: var(--border);
      border-radius: 4px;
      margin-top: 8px;
      overflow: hidden;
      position: relative;
    }
    .level-sidebar-progress-fill {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, var(--success), #34d399);
      transition: height 0.5s ease;
    }
    .level-sidebar-percent {
      font-size: 0.75rem;
      font-weight: bold;
      color: var(--success);
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <a href="index.html" class="logo">RPA ãƒ†ã‚¹ãƒˆã‚µã‚¤ãƒˆ</a>
      <nav>
        <ul>
          <li><a href="index.html">ãƒˆãƒƒãƒ—</a></li>
          <li><a href="form.html">å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ </a></li>
          <li><a href="click.html">ã‚¯ãƒªãƒƒã‚¯</a></li>
          <li><a href="keyboard.html">ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰</a></li>
          <li><a href="wait.html">å¾…æ©Ÿ</a></li>
          <li><a href="table.html">ãƒ†ãƒ¼ãƒ–ãƒ«</a></li>
          <li><a href="popup.html">ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—</a></li>
          <li><a href="dynamic.html">å‹•çš„</a></li>
          <li><a href="advanced.html">é«˜åº¦</a></li>
          <li><a href="challenge.html">æŒ‘æˆ¦</a></li>
          <li><a href="levels.html" class="active">ãƒ¬ãƒ™ãƒ«</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <div class="container">
      <h1 class="page-title">ğŸ¯ ãŠé¡Œã‚¯ãƒªã‚¢ãƒ¢ãƒ¼ãƒ‰</h1>
      <p class="page-description">RPAãƒ„ãƒ¼ãƒ«ã®æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆç”¨ã‚µã‚¤ãƒˆã€‚20ã®ãŠé¡Œã‚’ã‚¯ãƒªã‚¢ã—ã¦ã€ãƒ„ãƒ¼ãƒ«ã®å‹•ä½œã‚’æ¤œè¨¼ã—ã‚ˆã†ï¼</p>

      <!-- é€²æ—ãƒãƒ¼ -->
      <div class="progress-bar-container">
        <div class="progress-bar-fill" id="total-progress" style="width: 0%;">0%</div>
      </div>

      <!-- ãƒ¬ãƒ™ãƒ«ä¸€è¦§ -->
      <div class="level-grid" id="level-grid">
        <!-- JavaScriptã§ç”Ÿæˆ -->
      </div>

      <!-- ãƒ¬ãƒ™ãƒ«ãƒ—ãƒ¬ã‚¤ã‚¨ãƒªã‚¢ -->
      <div class="level-arena" id="level-arena">
        <div style="text-align: center; padding: 60px; color: var(--secondary);">
          <p style="font-size: 1.2rem;">ä¸Šã‹ã‚‰ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
        </div>
      </div>

      <!-- æ“ä½œãƒ­ã‚° -->
      <div class="card" style="margin-top: 24px;">
        <div class="card-title">ğŸ“œ æ“ä½œãƒ­ã‚°</div>
        <div id="level-log" class="log-area">
          <div class="log-entry"><span class="log-time">[--:--:--]</span>ãƒ¬ãƒ™ãƒ«ãƒ¢ãƒ¼ãƒ‰ã¸ã‚ˆã†ã“ãï¼</div>
        </div>
      </div>
    </div>
  </main>

  <!-- ç¸¦é•·ãƒ¬ãƒ™ãƒ«é€²æ—ãƒãƒ¼ï¼ˆå³ã‚µã‚¤ãƒ‰ï¼‰ -->
  <div class="level-sidebar" id="level-sidebar">
    <!-- JavaScriptã§ç”Ÿæˆ -->
  </div>

  <footer>
    <p>RPA Test Site for UIpowershell - Created for automation testing</p>
  </footer>

  <script src="script.js"></script>
  <script>
    // ãƒ¬ãƒ™ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ30ãƒ¬ãƒ™ãƒ« - å®Œå…¨ç‰ˆRPAãƒ„ãƒ¼ãƒ«æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼‰
    const levels = [
      // ===== å…¥é–€ï¼ˆ1-5ï¼‰ï¼šåŸºæœ¬æ“ä½œ =====
      { id: 1, title: 'ã‚·ãƒ³ã‚°ãƒ«ã‚¯ãƒªãƒƒã‚¯', category: 'å…¥é–€', desc: 'åŸºæœ¬ã®ã‚¯ãƒªãƒƒã‚¯æ“ä½œ', mission: 'ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', type: 'click' },
      { id: 2, title: 'ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯', category: 'å…¥é–€', desc: 'ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯æ“ä½œ', mission: 'ãƒœã‚¿ãƒ³ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', type: 'dblclick' },
      { id: 3, title: 'å³ã‚¯ãƒªãƒƒã‚¯', category: 'å…¥é–€', desc: 'ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼æ“ä½œ', mission: 'ãƒœã‚¿ãƒ³ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œå®Ÿè¡Œã€ã‚’é¸æŠ', type: 'rightclick' },
      { id: 4, title: 'ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›', category: 'å…¥é–€', desc: 'ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®å…¥åŠ›', mission: 'å…¥åŠ›æ¬„ã«ã€ŒRPAã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„', type: 'input', answer: 'RPA' },
      { id: 5, title: 'ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³é¸æŠ', category: 'å…¥é–€', desc: 'ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®æ“ä½œ', mission: 'ã€Œæ±äº¬éƒ½ã€ã‚’é¸æŠã—ã¦ãã ã•ã„', type: 'select', answer: 'tokyo' },
      // ===== åŸºæœ¬ï¼ˆ6-10ï¼‰ï¼šãƒ•ã‚©ãƒ¼ãƒ æ“ä½œ =====
      { id: 6, title: 'ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹', category: 'åŸºæœ¬', desc: 'ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ON/OFF', mission: 'ã€ŒåŒæ„ã™ã‚‹ã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„', type: 'checkbox' },
      { id: 7, title: 'ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³', category: 'åŸºæœ¬', desc: 'ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®é¸æŠ', mission: 'ã€Œã‚ªãƒ—ã‚·ãƒ§ãƒ³Bã€ã‚’é¸æŠã—ã¦ãã ã•ã„', type: 'radio', answer: 'b' },
      { id: 8, title: 'æ—¥ä»˜å…¥åŠ›', category: 'åŸºæœ¬', desc: 'æ—¥ä»˜ãƒ”ãƒƒã‚«ãƒ¼ã®æ“ä½œ', mission: '2025å¹´1æœˆ15æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„', type: 'date', answer: '2025-01-15' },
      { id: 9, title: 'ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ', category: 'åŸºæœ¬', desc: 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ“ä½œ', mission: 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„', type: 'file' },
      { id: 10, title: 'è¤‡æ•°é¸æŠãƒªã‚¹ãƒˆ', category: 'åŸºæœ¬', desc: 'è¤‡æ•°é …ç›®ã®é¸æŠ', mission: 'ã€Œã‚Šã‚“ã”ã€ã¨ã€Œã¿ã‹ã‚“ã€ã‚’ä¸¡æ–¹é¸æŠã—ã¦ãã ã•ã„', type: 'multiselect' },
      // ===== ä¸­ç´šAï¼ˆ11-15ï¼‰ï¼šã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ»ãƒã‚¦ã‚¹ =====
      { id: 11, title: 'ã‚­ãƒ¼å…¥åŠ›', category: 'ä¸­ç´šA', desc: 'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ', mission: 'å…¥åŠ›æ¬„ã§Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„', type: 'keyboard' },
      { id: 12, title: 'ãƒã‚¦ã‚¹ãƒ›ãƒãƒ¼', category: 'ä¸­ç´šA', desc: 'ãƒ›ãƒãƒ¼æ“ä½œ', mission: 'ãƒœã‚¿ãƒ³ã«ãƒã‚¦ã‚¹ã‚’ä¹—ã›ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'hover' },
      { id: 13, title: 'ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—', category: 'ä¸­ç´šA', desc: 'ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œ', mission: 'é’ã„ãƒœãƒƒã‚¯ã‚¹ã‚’ç·‘ã®ã‚¨ãƒªã‚¢ã«ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¦ãã ã•ã„', type: 'drag-drop' },
      { id: 14, title: 'ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ“ä½œ', category: 'ä¸­ç´šA', desc: 'ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è¦ç´ ã‚’è¡¨ç¤º', mission: 'ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'scroll' },
      { id: 15, title: 'ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œé¸æŠ', category: 'ä¸­ç´šA', desc: 'ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã®è¡Œé¸æŠ', mission: 'ã€Œã‚Šã‚“ã”ã€ã®è¡Œã®ã€Œé¸æŠã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'table', answer: 'ã‚Šã‚“ã”' },
      // ===== ä¸­ç´šBï¼ˆ16-20ï¼‰ï¼šå¾…æ©Ÿãƒ»å‹•çš„è¦ç´  =====
      { id: 16, title: 'ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³', category: 'ä¸­ç´šB', desc: 'ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆæ“ä½œ', mission: '2ãƒšãƒ¼ã‚¸ç›®ã«ç§»å‹•ã—ã¦ã€Œã‚ªãƒ¬ãƒ³ã‚¸ã€ã‚’é¸æŠ', type: 'pagination', answer: 'ã‚ªãƒ¬ãƒ³ã‚¸' },
      { id: 17, title: 'è¦ç´ å‡ºç¾å¾…ã¡', category: 'ä¸­ç´šB', desc: 'è¦ç´ ã®å‡ºç¾ã‚’å¾…æ©Ÿ', mission: 'ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ã‚¯ãƒªãƒƒã‚¯ï¼ˆ3ç§’å¾Œã«å‡ºç¾ï¼‰', type: 'wait' },
      { id: 18, title: 'å‹•çš„è¦ç´ ã‚¯ãƒªãƒƒã‚¯', category: 'ä¸­ç´šB', desc: 'å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹è¦ç´ ã®æ“ä½œ', mission: 'ã€Œè¿½åŠ ã€ã‚’æŠ¼ã—ã¦å‡ºç¾ã—ãŸã€Œã‚¿ãƒ¼ã‚²ãƒƒãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'dynamic' },
      { id: 19, title: 'Ajaxèª­ã¿è¾¼ã¿å¾…ã¡', category: 'ä¸­ç´šB', desc: 'éåŒæœŸèª­ã¿è¾¼ã¿ã®å¾…æ©Ÿ', mission: 'ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†å¾Œã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'ajax' },
      { id: 20, title: 'è¦ç´ æ¶ˆå¤±å¾…ã¡', category: 'ä¸­ç´šB', desc: 'è¦ç´ ã®æ¶ˆå¤±ã‚’å¾…æ©Ÿ', mission: 'ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒæ¶ˆãˆãŸã‚‰ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'wait-disappear' },
      // ===== ä¸Šç´šAï¼ˆ21-25ï¼‰ï¼šãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ  =====
      { id: 21, title: 'ã‚¢ãƒ©ãƒ¼ãƒˆç¢ºèª', category: 'ä¸Šç´šA', desc: 'ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å‡¦ç†', mission: 'ã‚¢ãƒ©ãƒ¼ãƒˆã®OKã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', type: 'alert' },
      { id: 22, title: 'ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°', category: 'ä¸Šç´šA', desc: 'ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å‡¦ç†', mission: 'ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ã€ŒOKã€ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'confirm' },
      { id: 23, title: 'ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ›', category: 'ä¸Šç´šA', desc: 'ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®å…¥åŠ›', mission: 'ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã€Œå®Œäº†ã€ã¨å…¥åŠ›ã—ã¦OK', type: 'prompt', answer: 'å®Œäº†' },
      { id: 24, title: 'ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°', category: 'ä¸Šç´šA', desc: 'ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®æ“ä½œ', mission: 'ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã„ã¦ä¸­ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'modal' },
      { id: 25, title: 'iframeå†…æ“ä½œ', category: 'ä¸Šç´šA', desc: 'iframeå†…ã®è¦ç´ æ“ä½œ', mission: 'iframeå†…ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', type: 'iframe' },
      // ===== ä¸Šç´šBï¼ˆ26-29ï¼‰ï¼šé«˜åº¦ãªæ“ä½œ =====
      { id: 26, title: 'ãƒã‚¹ãƒˆiframe', category: 'ä¸Šç´šB', desc: 'å…¥ã‚Œå­ã®iframeæ“ä½œ', mission: '2éšå±¤ç›®ã®iframeå†…ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'nested-iframe' },
      { id: 27, title: 'Shadow DOM', category: 'ä¸Šç´šB', desc: 'Shadow DOMå†…ã®æ“ä½œ', mission: 'Shadow DOMå†…ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'shadow-dom' },
      { id: 28, title: 'å±æ€§å€¤ã§è¦ç´ ç‰¹å®š', category: 'ä¸Šç´šB', desc: 'dataå±æ€§ã«ã‚ˆã‚‹è¦ç´ ç‰¹å®š', mission: 'data-testid="target"ã®è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯', type: 'attribute' },
      { id: 29, title: 'è¤‡åˆãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›', category: 'ä¸Šç´šB', desc: 'è¤‡æ•°é …ç›®ã®å…¥åŠ›', mission: 'åå‰ã€ãƒ¡ãƒ¼ãƒ«ã€é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦é€ä¿¡', type: 'form-multi' },
      // ===== æœ€çµ‚ï¼ˆ30ï¼‰=====
      { id: 30, title: 'ç·åˆãƒ†ã‚¹ãƒˆ', category: 'æœ€çµ‚', desc: 'å…¨æ©Ÿèƒ½ã®ç·åˆãƒ†ã‚¹ãƒˆ', mission: '10ã®èª²é¡Œã‚’é€£ç¶šã§ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„', type: 'final' }
    ];

    // ã‚¯ãƒªã‚¢çŠ¶æ…‹ã‚’ç®¡ç†
    let clearedLevels = JSON.parse(localStorage.getItem('rpa-cleared-levels') || '[]');
    let currentLevel = null;

    // ãƒ¬ãƒ™ãƒ«ä¸€è¦§ã‚’æç”»
    function renderLevelGrid() {
      const grid = document.getElementById('level-grid');
      grid.innerHTML = levels.map((level, index) => {
        const isCleared = clearedLevels.includes(level.id);
        const isLocked = index > 0 && !clearedLevels.includes(levels[index - 1].id);
        const isCurrent = !isCleared && !isLocked;

        let statusHtml = '';
        if (isCleared) {
          statusHtml = '<span class="cleared-text">âœ… ã‚¯ãƒªã‚¢æ¸ˆã¿</span><span class="stars">â­â­â­</span>';
        } else if (isLocked) {
          statusHtml = '<span class="locked-text">ğŸ”’ å‰ã®ãƒ¬ãƒ™ãƒ«ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„</span>';
        } else {
          statusHtml = '<span style="color: var(--primary);">â–¶ æŒ‘æˆ¦å¯èƒ½</span>';
        }

        return `
          <div class="level-card ${isCleared ? 'cleared' : ''} ${isLocked ? 'locked' : ''} ${isCurrent ? 'current' : ''}"
               onclick="${isLocked ? '' : `startLevel(${level.id})`}">
            <div class="level-number">${level.id}</div>
            <div class="level-title">${level.title}</div>
            <div class="level-desc">${level.desc}</div>
            <div class="level-status">${statusHtml}</div>
          </div>
        `;
      }).join('');

      // é€²æ—ãƒãƒ¼ã‚’æ›´æ–°
      const progress = (clearedLevels.length / levels.length) * 100;
      document.getElementById('total-progress').style.width = progress + '%';
      document.getElementById('total-progress').textContent = Math.round(progress) + '%';
    }

    // ãƒ¬ãƒ™ãƒ«ã‚’é–‹å§‹
    function startLevel(levelId) {
      var level = levels.find(function(l) { return l.id === levelId; });
      if (!level) return;

      currentLevel = level;
      sequenceProgress = 0;
      ãƒ­ã‚°ã‚’è¿½åŠ ('level-log', 'ãƒ¬ãƒ™ãƒ«' + level.id + 'ã€Œ' + level.title + 'ã€ã‚’é–‹å§‹');

      var arena = document.getElementById('level-arena');
      arena.innerHTML = '<div class="level-header"><h2><span class="level-badge">Lv.' + level.id + '</span> ' + level.title + ' <span style="font-size:0.8rem;color:var(--secondary);">[' + level.category + ']</span></h2><button class="btn btn-secondary" onclick="renderLevelGrid(); renderSidebar(); resetArena();">æˆ»ã‚‹</button></div><div class="mission-box"><h3>ğŸ“‹ ãƒŸãƒƒã‚·ãƒ§ãƒ³</h3><p>' + level.mission + '</p></div><div class="level-content" id="level-content">' + getLevelContent(level) + '</div>';

      // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–
      if (level.type === 'pagination') {
        setTimeout(function() { changePage(1); }, 100);
      }
    }

    // ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆ
    function getLevelContent(level) {
      switch (level.type) {
        case 'click':
          return '<div style="text-align: center; padding: 40px;"><button class="btn btn-primary" style="font-size: 1.5rem; padding: 20px 60px;" onclick="checkAnswer(\'click\')">ã‚¯ãƒªãƒƒã‚¯ï¼</button></div>';

        case 'dblclick':
          setTimeout(function() {
            var btn = document.getElementById('dblclick-btn');
            if (btn) btn.addEventListener('dblclick', function() { checkAnswer('dblclick'); });
          }, 100);
          return '<div style="text-align: center; padding: 40px;"><button id="dblclick-btn" class="btn btn-primary" style="font-size: 1.5rem; padding: 20px 60px;">ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ï¼</button></div>';

        case 'rightclick':
          setTimeout(initRightClick, 100);
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒœã‚¿ãƒ³ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œå®Ÿè¡Œã€ã‚’é¸æŠ</p><button id="rightclick-btn" class="btn btn-primary" style="font-size: 1.2rem; padding: 16px 40px;">å³ã‚¯ãƒªãƒƒã‚¯å¯¾è±¡</button><div id="context-menu" style="display:none;position:absolute;background:white;border:1px solid #ccc;border-radius:4px;box-shadow:0 2px 10px rgba(0,0,0,0.2);z-index:1000;"><div style="padding:8px 16px;cursor:pointer;hover:background:#f0f0f0;" onclick="checkAnswer(\'rightclick\')">å®Ÿè¡Œ</div><div style="padding:8px 16px;cursor:pointer;color:#999;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</div></div></div>';

        case 'input':
          return '<div style="max-width: 400px; margin: 0 auto; padding: 40px;"><div class="form-group"><label>ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›:</label><input type="text" id="level-input" placeholder="ã“ã“ã«å…¥åŠ›..."></div><button class="btn btn-primary" onclick="checkAnswer(\'input\')">ç¢ºèª</button></div>';

        case 'select':
          return '<div style="max-width: 400px; margin: 0 auto; padding: 40px;"><div class="form-group"><label>éƒ½é“åºœçœŒã‚’é¸æŠ:</label><select id="level-select"><option value="">é¸æŠã—ã¦ãã ã•ã„</option><option value="hokkaido">åŒ—æµ·é“</option><option value="tokyo">æ±äº¬éƒ½</option><option value="osaka">å¤§é˜ªåºœ</option><option value="fukuoka">ç¦å²¡çœŒ</option></select></div><button class="btn btn-primary" onclick="checkAnswer(\'select\')">ç¢ºèª</button></div>';

        case 'checkbox':
          return '<div style="max-width: 400px; margin: 0 auto; padding: 40px;"><div class="form-group"><label style="display: flex; align-items: center; gap: 12px; cursor: pointer;"><input type="checkbox" id="level-checkbox" style="width: 24px; height: 24px;"><span style="font-size: 1.1rem;">åŒæ„ã™ã‚‹</span></label></div><button class="btn btn-primary" onclick="checkAnswer(\'checkbox\')">ç¢ºèª</button></div>';

        case 'radio':
          return '<div style="max-width: 400px; margin: 0 auto; padding: 40px;"><div class="form-group"><label>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠ:</label><div class="radio-group" style="margin-top: 12px;"><label style="display: block; margin: 8px 0; cursor: pointer;"><input type="radio" name="level-radio" value="a"> ã‚ªãƒ—ã‚·ãƒ§ãƒ³A</label><label style="display: block; margin: 8px 0; cursor: pointer;"><input type="radio" name="level-radio" value="b"> ã‚ªãƒ—ã‚·ãƒ§ãƒ³B</label><label style="display: block; margin: 8px 0; cursor: pointer;"><input type="radio" name="level-radio" value="c"> ã‚ªãƒ—ã‚·ãƒ§ãƒ³C</label></div></div><button class="btn btn-primary" onclick="checkAnswer(\'radio\')">ç¢ºèª</button></div>';

        case 'date':
          return '<div style="max-width: 400px; margin: 0 auto; padding: 40px;"><div class="form-group"><label>æ—¥ä»˜ã‚’é¸æŠ (2025å¹´1æœˆ15æ—¥):</label><input type="date" id="level-date" style="padding: 12px; font-size: 1rem;"></div><button class="btn btn-primary" onclick="checkAnswer(\'date\')">ç¢ºèª</button></div>';

        case 'file':
          setTimeout(function() {
            var fi = document.getElementById('level-file');
            if (fi) fi.addEventListener('change', function() { if (fi.files.length > 0) checkAnswer('file'); });
          }, 100);
          return '<div style="max-width: 400px; margin: 0 auto; padding: 40px; text-align: center;"><p style="margin-bottom: 20px;">ä»»æ„ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</p><input type="file" id="level-file" style="padding: 12px;"></div>';

        case 'multiselect':
          return '<div style="max-width: 400px; margin: 0 auto; padding: 40px;"><div class="form-group"><label>ã€Œã‚Šã‚“ã”ã€ã¨ã€Œã¿ã‹ã‚“ã€ã‚’ä¸¡æ–¹é¸æŠ (Ctrl+ã‚¯ãƒªãƒƒã‚¯):</label><select id="level-multiselect" multiple style="width:100%;height:120px;padding:8px;"><option value="apple">ã‚Šã‚“ã”</option><option value="orange">ã¿ã‹ã‚“</option><option value="grape">ã¶ã©ã†</option><option value="banana">ãƒãƒŠãƒŠ</option></select></div><button class="btn btn-primary" onclick="checkAnswer(\'multiselect\')">ç¢ºèª</button></div>';

        case 'keyboard':
          setTimeout(function() {
            var input = document.getElementById('keyboard-input');
            if (input) input.addEventListener('keydown', function(e) { if (e.key === 'Enter') checkAnswer('keyboard'); });
          }, 100);
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ä¸‹ã®å…¥åŠ›æ¬„ã§Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„</p><input type="text" id="keyboard-input" style="padding: 12px; font-size: 1rem; width: 300px;" placeholder="ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦Enter"></div>';

        case 'hover':
          setTimeout(initHover, 100);
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒœã‚¿ãƒ³ã«ãƒã‚¦ã‚¹ã‚’ä¹—ã›ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯</p><div style="position:relative;display:inline-block;"><button id="hover-btn" class="btn btn-primary" style="font-size: 1.2rem;">ãƒ›ãƒãƒ¼å¯¾è±¡</button><div id="hover-menu" style="display:none;position:absolute;top:100%;left:0;background:white;border:1px solid #ccc;border-radius:4px;box-shadow:0 2px 10px rgba(0,0,0,0.2);z-index:100;min-width:150px;"><div style="padding:12px 16px;cursor:pointer;" onclick="checkAnswer(\'hover\')">ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®</div></div></div></div>';

        case 'drag-drop':
          setTimeout(initDragDrop, 100);
          return '<div style="padding: 40px;"><div style="display: flex; gap: 60px; justify-content: center; align-items: center;"><div id="drag-source" draggable="true" style="width: 80px; height: 80px; background: var(--primary); border-radius: 8px; cursor: grab; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">ãƒ‰ãƒ©ãƒƒã‚°</div><div id="drop-target" style="width: 150px; height: 150px; border: 3px dashed var(--success); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--secondary);">ã“ã“ã«ãƒ‰ãƒ­ãƒƒãƒ—</div></div></div>';

        case 'scroll':
          return '<div style="padding: 20px;"><p>ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ãƒœã‚¿ãƒ³ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„</p><div style="height: 400px; overflow-y: auto; border: 1px solid var(--border); border-radius: 8px; padding: 20px;" id="scroll-container"><div style="height: 800px; display: flex; flex-direction: column; justify-content: flex-end;"><button class="btn btn-success" style="font-size: 1.2rem;" onclick="checkAnswer(\'scroll\')">è¦‹ã¤ã‘ãŸï¼ã‚¯ãƒªãƒƒã‚¯</button></div></div></div>';

        case 'table':
          return '<div class="table-container"><table><thead><tr><th>ID</th><th>å•†å“å</th><th>æ“ä½œ</th></tr></thead><tbody><tr><td>001</td><td>ã‚Šã‚“ã”</td><td><button class="btn btn-primary" onclick="checkAnswer(\'table\', \'ã‚Šã‚“ã”\')">é¸æŠ</button></td></tr><tr><td>002</td><td>ã¿ã‹ã‚“</td><td><button class="btn btn-secondary" onclick="checkAnswer(\'table\', \'ã¿ã‹ã‚“\')">é¸æŠ</button></td></tr><tr><td>003</td><td>ã¶ã©ã†</td><td><button class="btn btn-secondary" onclick="checkAnswer(\'table\', \'ã¶ã©ã†\')">é¸æŠ</button></td></tr></tbody></table></div>';

        case 'pagination':
          paginationPage = 1;
          return '<div style="padding: 20px;"><div id="pagination-table"></div><div style="text-align: center; margin-top: 16px;"><button class="btn btn-secondary" onclick="changePage(1)" id="page-btn-1">1</button> <button class="btn btn-secondary" onclick="changePage(2)" id="page-btn-2">2</button></div></div>';

        case 'wait':
          setTimeout(function() {
            var container = document.getElementById('wait-btn-container');
            if (container) container.innerHTML = '<button class="btn btn-success" style="font-size: 1.2rem;" onclick="checkAnswer(\'wait\')">ä»Šã ï¼ã‚¯ãƒªãƒƒã‚¯ï¼</button>';
          }, 3000);
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…ã£ã¦ãã ã•ã„...</p><div id="wait-btn-container"><div class="spinner"></div></div></div>';

        case 'dynamic':
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ã€Œè¿½åŠ ã€ã‚’æŠ¼ã™ã¨æ–°ã—ã„ãƒœã‚¿ãƒ³ãŒå‡ºç¾ã—ã¾ã™</p><button class="btn btn-primary" onclick="addDynamicTarget()">è¿½åŠ </button><div id="dynamic-container" style="margin-top: 30px;"></div></div>';

        case 'ajax':
          setTimeout(function() {
            var container = document.getElementById('ajax-container');
            if (container) {
              container.innerHTML = '<div class="spinner"></div><p>ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¸­...</p>';
              setTimeout(function() {
                container.innerHTML = '<p style="color:var(--success);margin-bottom:16px;">èª­ã¿è¾¼ã¿å®Œäº†ï¼</p><button class="btn btn-success" onclick="checkAnswer(\'ajax\')">å®Œäº†ãƒœã‚¿ãƒ³</button>';
              }, 2000);
            }
          }, 100);
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚’å¾…ã£ã¦ã‹ã‚‰ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><div id="ajax-container"></div></div>';

        case 'wait-disappear':
          setTimeout(function() {
            var loader = document.getElementById('disappear-loader');
            var btn = document.getElementById('disappear-btn');
            if (loader && btn) {
              setTimeout(function() {
                loader.style.display = 'none';
                btn.style.display = 'inline-block';
              }, 2500);
            }
          }, 100);
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒæ¶ˆãˆãŸã‚‰ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><div id="disappear-loader"><div class="spinner"></div><p>å‡¦ç†ä¸­...</p></div><button id="disappear-btn" class="btn btn-success" style="display:none;font-size:1.2rem;" onclick="checkAnswer(\'wait-disappear\')">ã‚¯ãƒªãƒƒã‚¯ï¼</button></div>';

        case 'alert':
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‚¢ãƒ©ãƒ¼ãƒˆã®OKã‚’ã‚¯ãƒªãƒƒã‚¯</p><button class="btn btn-primary" style="font-size: 1.2rem;" onclick="showAlertChallenge()">ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤º</button></div>';

        case 'confirm':
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ã€ŒOKã€ã‚’é¸æŠ</p><button class="btn btn-primary" style="font-size: 1.2rem;" onclick="showConfirmChallenge()">ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º</button></div>';

        case 'prompt':
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã€Œå®Œäº†ã€ã¨å…¥åŠ›ã—ã¦OK</p><button class="btn btn-primary" style="font-size: 1.2rem;" onclick="showPromptChallenge()">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤º</button></div>';

        case 'modal':
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã„ã¦ä¸­ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><button class="btn btn-primary" style="font-size: 1.2rem;" onclick="openModal()">ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã</button></div><div id="level-modal" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:2000;display:none;align-items:center;justify-content:center;"><div style="background:white;padding:32px;border-radius:12px;text-align:center;"><h3 style="margin-bottom:16px;">ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°</h3><p style="margin-bottom:24px;">ã“ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p><button class="btn btn-success" onclick="checkAnswer(\'modal\');closeModal();">å®Œäº†</button><button class="btn btn-secondary" style="margin-left:8px;" onclick="closeModal()">é–‰ã˜ã‚‹</button></div></div>';

        case 'iframe':
          return '<div style="padding: 20px; text-align: center;"><p style="margin-bottom: 16px;">iframeå†…ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><iframe id="level-iframe" srcdoc="<html><body style=\'text-align:center;padding:40px;font-family:sans-serif;\'><button onclick=\'parent.checkAnswer(\"iframe\")\' style=\'padding:16px 32px;font-size:1.2rem;background:#2563eb;color:white;border:none;border-radius:8px;cursor:pointer;\'>iframeå†…ãƒœã‚¿ãƒ³</button></body></html>" style="width: 100%; height: 200px; border: 2px solid var(--border); border-radius: 8px;"></iframe></div>';

        case 'nested-iframe':
          return '<div style="padding: 20px; text-align: center;"><p style="margin-bottom: 16px;">2éšå±¤ç›®ã®iframeå†…ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><iframe srcdoc="<html><body style=\'text-align:center;padding:20px;font-family:sans-serif;\'><p>å¤–å´ã®iframe</p><iframe srcdoc=\'<html><body style=\"text-align:center;padding:20px;font-family:sans-serif;\"><p>å†…å´ã®iframe</p><button onclick=\"parent.parent.checkAnswer(\\\"nested-iframe\\\")\" style=\"padding:12px 24px;font-size:1rem;background:#059669;color:white;border:none;border-radius:8px;cursor:pointer;\">ãƒã‚¹ãƒˆãƒœã‚¿ãƒ³</button></body></html>\' style=\'width:100%;height:120px;border:1px solid #ccc;\'></iframe></body></html>" style="width: 100%; height: 250px; border: 2px solid var(--border); border-radius: 8px;"></iframe></div>';

        case 'shadow-dom':
          setTimeout(initShadowDOM, 100);
          return '<div style="padding: 40px; text-align: center;"><p style="margin-bottom: 20px;">Shadow DOMå†…ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><div id="shadow-host"></div></div>';

        case 'attribute':
          return '<div style="text-align: center; padding: 40px;"><p style="margin-bottom: 20px;">data-testid="target" ã®è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯</p><div style="display:flex;gap:16px;justify-content:center;flex-wrap:wrap;"><button class="btn btn-secondary" data-testid="decoy1">data-testid="decoy1"</button><button class="btn btn-secondary" data-testid="decoy2">data-testid="decoy2"</button><button class="btn btn-primary" data-testid="target" onclick="checkAnswer(\'attribute\')">data-testid="target"</button><button class="btn btn-secondary" data-testid="decoy3">data-testid="decoy3"</button></div></div>';

        case 'form-multi':
          return '<div style="max-width: 400px; margin: 0 auto; padding: 20px;"><div class="form-group"><label>åå‰:</label><input type="text" id="multi-name" placeholder="åå‰ã‚’å…¥åŠ›"></div><div class="form-group"><label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</label><input type="email" id="multi-email" placeholder="example@test.com"></div><div class="form-group"><label>é›»è©±ç•ªå·:</label><input type="tel" id="multi-phone" placeholder="090-1234-5678"></div><button class="btn btn-primary" onclick="checkAnswer(\'form-multi\')">é€ä¿¡</button></div>';

        case 'final':
          finalStep = 0;
          finalTotalSteps = 10;
          return '<div style="padding: 20px;"><div id="final-challenge" style="text-align: center;"><p>10ã®èª²é¡Œã‚’é€£ç¶šã§ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„</p><p style="margin: 20px 0;">é€²æ—: <span id="final-progress">0</span>/10</p><button class="btn btn-primary" onclick="startFinalStep()">é–‹å§‹</button></div></div>';

        default:
          return '<p>ã“ã®ãƒ¬ãƒ™ãƒ«ã¯æº–å‚™ä¸­ã§ã™...</p>';
      }
    }

    // å›ç­”ã‚’ãƒã‚§ãƒƒã‚¯
    let sequenceProgress = 0;
    let paginationPage = 1;
    let finalStep = 0;
    let finalTotalSteps = 10;

    function checkAnswer(type, extra) {
      let success = false;

      switch (type) {
        case 'click':
        case 'dblclick':
        case 'rightclick':
        case 'keyboard':
        case 'hover':
        case 'scroll':
        case 'wait':
        case 'dynamic':
        case 'ajax':
        case 'wait-disappear':
        case 'iframe':
        case 'nested-iframe':
        case 'shadow-dom':
        case 'attribute':
        case 'modal':
        case 'file':
          success = true;
          break;

        case 'input':
          var inputVal = document.getElementById('level-input');
          success = inputVal && inputVal.value.toUpperCase() === currentLevel.answer;
          break;

        case 'select':
          var selectVal = document.getElementById('level-select');
          success = selectVal && selectVal.value === currentLevel.answer;
          break;

        case 'checkbox':
          var cb = document.getElementById('level-checkbox');
          success = cb && cb.checked;
          break;

        case 'radio':
          var radioEl = document.querySelector('input[name="level-radio"]:checked');
          success = radioEl && radioEl.value === currentLevel.answer;
          break;

        case 'date':
          var dateVal = document.getElementById('level-date');
          success = dateVal && dateVal.value === currentLevel.answer;
          break;

        case 'multiselect':
          var ms = document.getElementById('level-multiselect');
          if (ms) {
            var selected = Array.from(ms.selectedOptions).map(function(o) { return o.value; });
            success = selected.includes('apple') && selected.includes('orange');
          }
          break;

        case 'table':
        case 'pagination':
          success = extra === currentLevel.answer;
          break;

        case 'form-multi':
          var mName = document.getElementById('multi-name');
          var mEmail = document.getElementById('multi-email');
          var mPhone = document.getElementById('multi-phone');
          success = mName && mName.value.length > 0 && mEmail && mEmail.value.includes('@') && mPhone && mPhone.value.length > 5;
          break;

        case 'drag-drop':
        case 'alert':
        case 'confirm':
        case 'prompt':
        case 'final':
          success = true;
          break;
      }

      if (success) {
        clearLevel();
      } else {
        ãƒ­ã‚°ã‚’è¿½åŠ ('level-log', 'âŒ æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ã¾ã›ã‚“ã€‚ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ãã ã•ã„ã€‚');
        alert('æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ã¾ã›ã‚“ã€‚ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ãã ã•ã„ã€‚');
      }
    }

    // å³ã‚¯ãƒªãƒƒã‚¯åˆæœŸåŒ–
    function initRightClick() {
      var btn = document.getElementById('rightclick-btn');
      var menu = document.getElementById('context-menu');
      if (!btn || !menu) return;
      btn.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        menu.style.display = 'block';
        menu.style.left = e.pageX + 'px';
        menu.style.top = e.pageY + 'px';
      });
      document.addEventListener('click', function() { menu.style.display = 'none'; });
    }

    // ãƒ›ãƒãƒ¼åˆæœŸåŒ–
    function initHover() {
      var btn = document.getElementById('hover-btn');
      var menu = document.getElementById('hover-menu');
      if (!btn || !menu) return;
      btn.addEventListener('mouseenter', function() { menu.style.display = 'block'; });
      btn.parentElement.addEventListener('mouseleave', function() { menu.style.display = 'none'; });
    }

    // ãƒ¢ãƒ¼ãƒ€ãƒ«
    function openModal() {
      var modal = document.getElementById('level-modal');
      if (modal) modal.style.display = 'flex';
    }
    function closeModal() {
      var modal = document.getElementById('level-modal');
      if (modal) modal.style.display = 'none';
    }

    // ã‚¢ãƒ©ãƒ¼ãƒˆãƒãƒ£ãƒ¬ãƒ³ã‚¸
    function showAlertChallenge() {
      alert('ã“ã‚Œã¯ã‚¢ãƒ©ãƒ¼ãƒˆã§ã™ã€‚OKã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚');
      checkAnswer('alert');
    }

    // ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãƒãƒ£ãƒ¬ãƒ³ã‚¸
    function showConfirmChallenge() {
      var result = confirm('OKã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚’æŠ¼ã™ã¨å¤±æ•—ã§ã™ã€‚');
      if (result) {
        checkAnswer('confirm');
      } else {
        ãƒ­ã‚°ã‚’è¿½åŠ ('level-log', 'âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãŒæŠ¼ã•ã‚Œã¾ã—ãŸã€‚');
      }
    }

    // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ£ãƒ¬ãƒ³ã‚¸
    function showPromptChallenge() {
      var result = prompt('ã€Œå®Œäº†ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„:');
      if (result === currentLevel.answer) {
        checkAnswer('prompt');
      } else {
        ãƒ­ã‚°ã‚’è¿½åŠ ('level-log', 'âŒ å…¥åŠ›ãŒé•ã„ã¾ã™ã€‚ã€Œå®Œäº†ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
        alert('å…¥åŠ›ãŒé•ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ãã ã•ã„ã€‚');
      }
    }

    // å‹•çš„è¦ç´ è¿½åŠ 
    function addDynamicTarget() {
      var container = document.getElementById('dynamic-container');
      if (container) {
        container.innerHTML = '<button class="btn btn-success" style="font-size: 1.2rem;" onclick="checkAnswer(\'dynamic\')">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</button>';
      }
    }

    // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
    var paginationData = {
      1: [{ name: 'ã‚Šã‚“ã”' }, { name: 'ã¿ã‹ã‚“' }, { name: 'ãƒãƒŠãƒŠ' }],
      2: [{ name: 'ã¶ã©ã†' }, { name: 'ã‚ªãƒ¬ãƒ³ã‚¸' }, { name: 'ã„ã¡ã”' }]
    };

    function changePage(page) {
      paginationPage = page;
      document.getElementById('page-btn-1').classList.toggle('btn-primary', page === 1);
      document.getElementById('page-btn-1').classList.toggle('btn-secondary', page !== 1);
      document.getElementById('page-btn-2').classList.toggle('btn-primary', page === 2);
      document.getElementById('page-btn-2').classList.toggle('btn-secondary', page !== 2);
      renderPaginationTable();
    }

    function renderPaginationTable() {
      var data = paginationData[paginationPage];
      var html = '<table><thead><tr><th>No</th><th>å•†å“å</th><th>æ“ä½œ</th></tr></thead><tbody>';
      data.forEach(function(item, i) {
        html += '<tr><td>' + (i + 1) + '</td><td>' + item.name + '</td><td><button class="btn btn-secondary" onclick="checkAnswer(\'pagination\', \'' + item.name + '\')">é¸æŠ</button></td></tr>';
      });
      html += '</tbody></table>';
      document.getElementById('pagination-table').innerHTML = html;
    }

    // ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—åˆæœŸåŒ–
    function initDragDrop() {
      var source = document.getElementById('drag-source');
      var target = document.getElementById('drop-target');
      if (!source || !target) return;

      source.addEventListener('dragstart', function(e) {
        e.dataTransfer.setData('text', 'drag');
        source.style.opacity = '0.5';
      });
      source.addEventListener('dragend', function() {
        source.style.opacity = '1';
      });
      target.addEventListener('dragover', function(e) {
        e.preventDefault();
        target.style.borderColor = '#059669';
        target.style.background = 'rgba(16, 185, 129, 0.1)';
      });
      target.addEventListener('dragleave', function() {
        target.style.borderColor = 'var(--success)';
        target.style.background = 'transparent';
      });
      target.addEventListener('drop', function(e) {
        e.preventDefault();
        target.innerHTML = '<div style="color: var(--success); font-weight: bold;">ãƒ‰ãƒ­ãƒƒãƒ—æˆåŠŸï¼</div>';
        setTimeout(function() { checkAnswer('drag-drop'); }, 500);
      });
    }

    // Shadow DOMåˆæœŸåŒ–
    function initShadowDOM() {
      var host = document.getElementById('shadow-host');
      if (!host || host.shadowRoot) return;
      var shadow = host.attachShadow({ mode: 'open' });
      shadow.innerHTML = '<style>button { padding: 16px 32px; font-size: 1.2rem; background: #7c3aed; color: white; border: none; border-radius: 8px; cursor: pointer; } button:hover { background: #6d28d9; }</style><button id="shadow-btn">Shadow DOMãƒœã‚¿ãƒ³</button>';
      shadow.getElementById('shadow-btn').addEventListener('click', function() {
        checkAnswer('shadow-dom');
      });
    }

    // ç·åˆãƒ†ã‚¹ãƒˆï¼ˆ10èª²é¡Œï¼‰
    var finalSteps = ['click', 'dblclick', 'input', 'select', 'checkbox', 'radio', 'date', 'alert', 'confirm', 'prompt'];
    function startFinalStep() {
      var container = document.getElementById('final-challenge');
      if (finalStep >= finalSteps.length) {
        checkAnswer('final');
        return;
      }
      var step = finalSteps[finalStep];
      var html = '<p style="font-weight:bold;margin-bottom:16px;">èª²é¡Œ ' + (finalStep + 1) + '/10: ';
      switch (step) {
        case 'click':
          html += 'ã‚¯ãƒªãƒƒã‚¯</p><button class="btn btn-primary" onclick="completeFinalStep()">ã‚¯ãƒªãƒƒã‚¯</button>';
          break;
        case 'dblclick':
          html += 'ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</p><button class="btn btn-primary" id="final-dbl" ondblclick="completeFinalStep()">ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</button>';
          break;
        case 'input':
          html += 'ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›</p><input type="text" id="final-input" placeholder="ä½•ã‹å…¥åŠ›" style="margin-right:8px;"><button class="btn btn-primary" onclick="checkFinalInput()">ç¢ºèª</button>';
          break;
        case 'select':
          html += 'ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³é¸æŠ</p><select id="final-sel" style="margin-right:8px;"><option value="">é¸æŠ</option><option value="ok">OK</option></select><button class="btn btn-primary" onclick="checkFinalSelect()">ç¢ºèª</button>';
          break;
        case 'checkbox':
          html += 'ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹</p><label style="margin-right:16px;"><input type="checkbox" id="final-cb"> ãƒã‚§ãƒƒã‚¯</label><button class="btn btn-primary" onclick="checkFinalCheckbox()">ç¢ºèª</button>';
          break;
        case 'radio':
          html += 'ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³</p><label style="margin-right:8px;"><input type="radio" name="final-radio" value="a">A</label><label style="margin-right:8px;"><input type="radio" name="final-radio" value="b">B</label><button class="btn btn-primary" onclick="checkFinalRadio()">Bã‚’é¸æŠã—ã¦ç¢ºèª</button>';
          break;
        case 'date':
          html += 'æ—¥ä»˜å…¥åŠ›</p><input type="date" id="final-date" style="margin-right:8px;"><button class="btn btn-primary" onclick="checkFinalDate()">ä»»æ„ã®æ—¥ä»˜ã‚’é¸æŠã—ã¦ç¢ºèª</button>';
          break;
        case 'alert':
          html += 'ã‚¢ãƒ©ãƒ¼ãƒˆç¢ºèª</p><button class="btn btn-primary" onclick="alert(\'OK!\');completeFinalStep();">ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤º</button>';
          break;
        case 'confirm':
          html += 'ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°</p><button class="btn btn-primary" onclick="checkFinalConfirm()">ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆOKã‚’æŠ¼ã™ï¼‰</button>';
          break;
        case 'prompt':
          html += 'ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ›</p><button class="btn btn-primary" onclick="checkFinalPrompt()">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆã€Œå®Œäº†ã€ã¨å…¥åŠ›ï¼‰</button>';
          break;
      }
      container.innerHTML = html;
    }
    function completeFinalStep() { finalStep++; document.getElementById('final-progress').textContent = finalStep; startFinalStep(); }
    function checkFinalInput() { var v = document.getElementById('final-input'); if (v && v.value.length > 0) completeFinalStep(); else alert('å…¥åŠ›ã—ã¦ãã ã•ã„'); }
    function checkFinalSelect() { var v = document.getElementById('final-sel'); if (v && v.value) completeFinalStep(); else alert('é¸æŠã—ã¦ãã ã•ã„'); }
    function checkFinalCheckbox() { var v = document.getElementById('final-cb'); if (v && v.checked) completeFinalStep(); else alert('ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„'); }
    function checkFinalRadio() { var v = document.querySelector('input[name="final-radio"]:checked'); if (v && v.value === 'b') completeFinalStep(); else alert('Bã‚’é¸æŠã—ã¦ãã ã•ã„'); }
    function checkFinalDate() { var v = document.getElementById('final-date'); if (v && v.value) completeFinalStep(); else alert('æ—¥ä»˜ã‚’é¸æŠã—ã¦ãã ã•ã„'); }
    function checkFinalConfirm() { if (confirm('OKã‚’æŠ¼ã—ã¦ãã ã•ã„')) completeFinalStep(); }
    function checkFinalPrompt() { var r = prompt('ã€Œå®Œäº†ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„:'); if (r === 'å®Œäº†') completeFinalStep(); else alert('ã€Œå®Œäº†ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„'); }

    // ãƒ¬ãƒ™ãƒ«ã‚¯ãƒªã‚¢
    function clearLevel() {
      if (!clearedLevels.includes(currentLevel.id)) {
        clearedLevels.push(currentLevel.id);
        localStorage.setItem('rpa-cleared-levels', JSON.stringify(clearedLevels));
      }

      ãƒ­ã‚°ã‚’è¿½åŠ ('level-log', `ğŸ‰ ãƒ¬ãƒ™ãƒ«${currentLevel.id}ã€Œ${currentLevel.title}ã€ã‚¯ãƒªã‚¢ï¼`);

      const arena = document.getElementById('level-arena');
      arena.innerHTML = `
        <div class="celebration">
          <div class="stars">â­â­â­</div>
          <h2>ğŸ‰ ãƒ¬ãƒ™ãƒ«${currentLevel.id} ã‚¯ãƒªã‚¢ï¼</h2>
          <p style="font-size: 1.2rem; margin-bottom: 24px;">${currentLevel.title}ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸï¼</p>
          <div class="level-actions">
            ${currentLevel.id < levels.length
              ? `<button class="btn btn-primary" onclick="startLevel(${currentLevel.id + 1})">æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¸ â†’</button>`
              : `<button class="btn btn-success" onclick="alert('ãŠã‚ã§ã¨ã†ï¼å…¨ãƒ¬ãƒ™ãƒ«ã‚¯ãƒªã‚¢ï¼')">ğŸ† å…¨ã‚¯ãƒªã‚¢ï¼</button>`
            }
            <button class="btn btn-secondary" onclick="renderLevelGrid(); renderSidebar(); resetArena();">ãƒ¬ãƒ™ãƒ«é¸æŠã«æˆ»ã‚‹</button>
          </div>
        </div>
      `;

      renderLevelGrid();
      renderSidebar();
    }

    // ã‚¢ãƒªãƒ¼ãƒŠã‚’ãƒªã‚»ãƒƒãƒˆ
    function resetArena() {
      sequenceProgress = 0;
      document.getElementById('level-arena').innerHTML = `
        <div style="text-align: center; padding: 60px; color: var(--secondary);">
          <p style="font-size: 1.2rem;">ä¸Šã‹ã‚‰ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
        </div>
      `;
    }

    // é€²æ—ãƒªã‚»ãƒƒãƒˆ
    function resetProgress() {
      if (confirm('é€²æ—ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
        clearedLevels = [];
        localStorage.removeItem('rpa-cleared-levels');
        renderLevelGrid();
        renderSidebar();
        resetArena();
        ãƒ­ã‚°ã‚’è¿½åŠ ('level-log', 'é€²æ—ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸ');
      }
    }

    // ã‚µã‚¤ãƒ‰ãƒãƒ¼æç”»
    function renderSidebar() {
      const sidebar = document.getElementById('level-sidebar');
      if (!sidebar) return;

      const clearedCount = clearedLevels.length;
      const totalLevels = levels.length;
      const percent = Math.round((clearedCount / totalLevels) * 100);

      let html = '';

      // ãƒ¬ãƒ™ãƒ«ãƒ‰ãƒƒãƒˆï¼ˆ1ã€œ10ï¼‰
      levels.forEach((level) => {
        const isCleared = clearedLevels.includes(level.id);
        const isLocked = level.id > 1 && !clearedLevels.includes(level.id - 1);

        let dotClass = 'level-dot';
        if (isCleared) {
          dotClass += ' cleared';
        } else if (isLocked) {
          dotClass += ' locked';
        } else {
          dotClass += ' current';
        }

        const icon = isCleared ? 'âœ“' : level.id;
        const clickHandler = isLocked ? '' : 'startLevel(' + level.id + ')';

        html += '<div class="' + dotClass + '" onclick="' + clickHandler + '" title="Lv.' + level.id + ': ' + level.title + '">' + icon + '</div>';
      });

      // é€²æ—ãƒãƒ¼
      html += '<div class="level-sidebar-progress"><div class="level-sidebar-progress-fill" style="height: ' + percent + '%"></div></div>';
      html += '<div class="level-sidebar-percent">' + percent + '%</div>';

      sidebar.innerHTML = html;
    }

    // åˆæœŸåŒ–
    renderLevelGrid();
    renderSidebar();
  </script>
</body>
</html>
